{"version":3,"file":"static/js/711.f3abda9a.chunk.js","mappings":"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","sources":["components/ExerciseTimer.jsx","pages/Happy.jsx"],"sourcesContent":["// src/components/ExerciseTimer.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nexport default function ExerciseTimer({\r\n  id,\r\n  emoji,\r\n  title,\r\n  desc,\r\n  mins = 5,\r\n  accent = \"inspired\",\r\n  onComplete, // optional callback when timer hits 0\r\n}) {\r\n  const total = Math.max(1, Math.round(Number(mins) * 60)); // seconds\r\n  const [left, setLeft] = useState(total);\r\n  const [running, setRunning] = useState(false);\r\n  const [done, setDone] = useState(false);\r\n\r\n  // internal refs\r\n  const timerRef = useRef(null);      // current timeout id\r\n  const endAtRef = useRef(null);      // epoch ms when timer should end\r\n  const startedOnceRef = useRef(false);\r\n\r\n  // time parts\r\n  const mm = String(Math.floor(left / 60)).padStart(2, \"0\");\r\n  const ss = String(left % 60).padStart(2, \"0\");\r\n  const pct = useMemo(() => (total - left) / total, [left, total]);\r\n  const deg = Math.round(Math.min(1, Math.max(0, pct)) * 360);\r\n\r\n  // reset when mins changes (e.g., prop updates)\r\n  useEffect(() => {\r\n    clearTimeout(timerRef.current);\r\n    endAtRef.current = null;\r\n    setRunning(false);\r\n    setDone(false);\r\n    setLeft(total);\r\n    // cleanup on unmount\r\n    return () => clearTimeout(timerRef.current);\r\n  }, [total]);\r\n\r\n  // drift-free tick using end timestamp\r\n  function scheduleTick() {\r\n    clearTimeout(timerRef.current);\r\n    timerRef.current = setTimeout(() => {\r\n      const now = Date.now();\r\n      const endAt = endAtRef.current ?? now;\r\n      const secondsLeft = Math.max(0, Math.ceil((endAt - now) / 1000));\r\n      setLeft(secondsLeft);\r\n\r\n      if (secondsLeft <= 0) {\r\n        setRunning(false);\r\n        setDone(true);\r\n        endAtRef.current = null;\r\n\r\n        // small “ding” (after some user interaction likely happened)\r\n        try {\r\n          const Ctx = window.AudioContext || window.webkitAudioContext;\r\n          const ctx = new Ctx();\r\n          if (ctx.state === \"suspended\") ctx.resume?.();\r\n          const o = ctx.createOscillator();\r\n          const g = ctx.createGain();\r\n          o.type = \"sine\";\r\n          o.frequency.value = 880;\r\n          o.connect(g);\r\n          g.connect(ctx.destination);\r\n          g.gain.setValueAtTime(0.22, ctx.currentTime);\r\n          g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 1);\r\n          o.start();\r\n          o.stop(ctx.currentTime + 1);\r\n          setTimeout(() => ctx.close?.(), 1200);\r\n        } catch { /* ignore audio errors */ }\r\n\r\n        // haptic tap (supported devices only)\r\n        try { navigator.vibrate?.(150); } catch {}\r\n\r\n        onComplete?.();\r\n        return;\r\n      }\r\n\r\n      // schedule next check; 250ms keeps UI snappy without heavy work\r\n      scheduleTick();\r\n    }, 250);\r\n  }\r\n\r\n  function start() {\r\n    startedOnceRef.current = true;\r\n    setDone(false);\r\n    // if finished, reset remaining to full total before starting\r\n    setLeft((s) => (s === 0 ? total : s));\r\n    setRunning(true);\r\n\r\n    // establish or re-establish end time based on *current* left\r\n    endAtRef.current = Date.now() + (left === 0 ? total : left) * 1000;\r\n    scheduleTick();\r\n  }\r\n\r\n  function pause() {\r\n    setRunning(false);\r\n    clearTimeout(timerRef.current);\r\n    // keep current left; recompute endAt when starting again\r\n    endAtRef.current = null;\r\n  }\r\n\r\n  function reset() {\r\n    setRunning(false);\r\n    setDone(false);\r\n    clearTimeout(timerRef.current);\r\n    endAtRef.current = null;\r\n    setLeft(total);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`exercise-card timer ${accent === \"angry\" ? \"angryX\" : \"inspiredX\"} ${done ? \"celebrate\" : \"\"}`}\r\n      id={id}\r\n    >\r\n      <div className=\"ex-top\">\r\n        <span className=\"ex-emoji\" aria-hidden=\"true\">{emoji}</span>\r\n        <span className=\"ex-mins\">{Math.ceil(left / 60)}m</span>\r\n      </div>\r\n\r\n      <div\r\n        className={`timer-ring ${accent}`}\r\n        style={{ background: `conic-gradient(var(--ring-accent) ${deg}deg, var(--ring-track) 0)` }}\r\n        role=\"progressbar\"\r\n        aria-label={`${title} progress`}\r\n        aria-valuemin={0}\r\n        aria-valuemax={total}\r\n        aria-valuenow={total - left}\r\n      >\r\n        <div className=\"timer-core\">\r\n          {/* role=\"timer\" is often noisy for SRs; we keep it readable without constant announcements */}\r\n          <div className=\"timer-time\" aria-live=\"polite\">\r\n            {mm}:{ss}\r\n          </div>\r\n          <div className=\"timer-label\">{title}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <p className=\"timer-desc\">{desc}</p>\r\n\r\n      <div className=\"timer-controls\">\r\n        {!running ? (\r\n          <button className=\"ex-btn\" onClick={start}>\r\n            {left === total || left === 0 ? \"Start\" : \"Resume\"}\r\n          </button>\r\n        ) : (\r\n          <button className=\"ex-btn ghost\" onClick={pause}>Pause</button>\r\n        )}\r\n        <button className=\"ex-btn subtle\" onClick={reset} disabled={!startedOnceRef.current && left === total}>\r\n          Reset\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/pages/Happy.jsx\r\nimport React, { useMemo, useState, useEffect, useRef } from \"react\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport ExerciseTimer from \"../components/ExerciseTimer\";\r\nimport Particles from \"../components/Particles\";\r\nimport defaultProducts, { PRODUCTS as NAMED } from \"../data/products\";\r\n\r\nconst HAPPY_EXERCISES = [\r\n  { id: \"grat-5\",  emoji: \"📝\", title: \"3 Gratitudes\",  desc: \"Write 3 oddly-specific gratitudes.\", mins: 5 },\r\n  { id: \"smile-3\", emoji: \"😊\", title: \"Smile Set\",     desc: \"Hold a gentle smile, breathe 4-4.\",  mins: 3 },\r\n  { id: \"dance-6\", emoji: \"💃\", title: \"Micro-Dance\",   desc: \"1 song, goofy moves, no judging.\",   mins: 6 },\r\n  { id: \"ping-7\",  emoji: \"📨\", title: \"Kind Ping\",     desc: \"Send 1 kind text to someone.\",       mins: 7 },\r\n];\r\n\r\nexport default function Happy() {\r\n  const all = Array.isArray(NAMED) ? NAMED : Array.isArray(defaultProducts) ? defaultProducts : [];\r\n  const moodBase = all.filter((p) => p.mood === \"happy\");\r\n  const source = moodBase.length > 0 ? moodBase : all; // fallback so page isn't empty\r\n\r\n  const [q, setQ] = useState(\"\");\r\n  const [qDeb, setQDeb] = useState(\"\");\r\n  const [sort, setSort] = useState(\"popular\");\r\n  const [chip, setChip] = useState(\"all\");\r\n  \r\n\r\n  // debounce search\r\n  useEffect(() => {\r\n    const id = setTimeout(() => setQDeb(q.trim().toLowerCase()), 140);\r\n    return () => clearTimeout(id);\r\n  }, [q]);\r\n\r\n  // category counts + ordered list\r\n  const { categories, counts } = useMemo(() => {\r\n    const cnt = source.reduce((m, p) => {\r\n      const k = p.category || \"Other\";\r\n      m[k] = (m[k] || 0) + 1;\r\n      return m;\r\n    }, {});\r\n    const cats = Object.keys(cnt).sort((a, b) => (cnt[b] || 0) - (cnt[a] || 0));\r\n    return { categories: [\"all\", ...cats], counts: cnt };\r\n  }, [source]);\r\n\r\n  const items = useMemo(() => {\r\n    let list = [...source];\r\n\r\n    if (chip !== \"all\") list = list.filter((p) => (p.category || \"Other\") === chip);\r\n\r\n    if (qDeb) {\r\n      const t = qDeb;\r\n      list = list.filter(\r\n        (p) =>\r\n          p.name.toLowerCase().includes(t) ||\r\n          p.tagline?.toLowerCase().includes(t) ||\r\n          p.tags?.some((x) => x.toLowerCase().includes(t))\r\n      );\r\n    }\r\n\r\n    switch (sort) {\r\n      case \"price-asc\":  list.sort((a, b) => a.price - b.price); break;\r\n      case \"price-desc\": list.sort((a, b) => b.price - a.price); break;\r\n      case \"rating\":     list.sort((a, b) => (b.rating ?? 0) - (a.rating ?? 0)); break;\r\n      default:           list.sort((a, b) => (b.reviews ?? 0) - (a.reviews ?? 0)); // popular\r\n    }\r\n    return list;\r\n  }, [source, qDeb, sort, chip]);\r\n\r\n  const results = items.length;\r\n\r\n  // SR-only utility\r\n  const srOnly = {\r\n    position: \"absolute\",\r\n    width: \"1px\",\r\n    height: \"1px\",\r\n    padding: 0,\r\n    margin: \"-1px\",\r\n    overflow: \"hidden\",\r\n    clip: \"rect(0, 0, 0, 0)\",\r\n    whiteSpace: \"nowrap\",\r\n    border: 0,\r\n  };\r\n\r\n  // announce result count\r\n  const liveRef = useRef(null);\r\n  useEffect(() => {\r\n    if (liveRef.current) {\r\n      liveRef.current.textContent = `${results} result${results === 1 ? \"\" : \"s\"}`;\r\n    }\r\n  }, [results]);\r\n\r\n  function clearFilters() {\r\n    setQ(\"\");\r\n    setQDeb(\"\");\r\n    setChip(\"all\");\r\n    setSort(\"popular\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"page happy-page pretty\">\r\n      <header className=\"mood-hero happy\">\r\n        <Particles variant=\"happy\" count={26} speed={1.0} parallax />\r\n        <div className=\"inner\">\r\n          <h1>😊 Happy</h1>\r\n          <p>Keep the good vibes rolling with upbeat picks and tiny joy breaks.</p>\r\n        </div>\r\n      </header>\r\n\r\n      {moodBase.length === 0 && (\r\n        <div className=\"section-wide\">\r\n          <div className=\"empty-hint\">\r\n            Showing general picks — add products with <code>mood: \"happy\"</code> in <code>data/products.js</code> to curate this page.\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Sticky filters */}\r\n      <div className=\"section-wide sticky-filters\">\r\n        <div className=\"filters\" role=\"region\" aria-label=\"Filters\">\r\n          <input\r\n            className=\"filter-input\"\r\n            placeholder=\"Search feel-good gear…\"\r\n            value={q}\r\n            onChange={(e) => setQ(e.target.value)}\r\n            aria-label=\"Search products\"\r\n          />\r\n\r\n          <select\r\n            className=\"filter-select\"\r\n            value={sort}\r\n            onChange={(e) => setSort(e.target.value)}\r\n            aria-label=\"Sort products\"\r\n          >\r\n            <option value=\"popular\">Most popular</option>\r\n            <option value=\"rating\">Top rated</option>\r\n            <option value=\"price-asc\">Price: low → high</option>\r\n            <option value=\"price-desc\">Price: high → low</option>\r\n          </select>\r\n\r\n          <div className=\"chips\" role=\"listbox\" aria-label=\"Filter by category\">\r\n            {categories.map((c) => {\r\n              const isAll = c === \"all\";\r\n              const count = isAll ? source.length : counts[c] || 0;\r\n              const active = chip === c;\r\n              return (\r\n                <button\r\n                  key={c}\r\n                  className={`chip ${active ? \"active\" : \"\"}`}\r\n                  onClick={() => setChip((prev) => (prev === c ? \"all\" : c))}\r\n                  aria-pressed={active}\r\n                  title={isAll ? \"All categories\" : `${c} (${count})`}\r\n                >\r\n                  {c}\r\n                  <span style={{ opacity: 0.8, marginLeft: 6 }}>· {count}</span>\r\n                </button>\r\n              );\r\n            })}\r\n            {(q || chip !== \"all\" || sort !== \"popular\") && (\r\n              <button className=\"chip\" onClick={clearFilters} title=\"Clear filters\">\r\n                Reset\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* live region for result count */}\r\n          <span style={srOnly} aria-live=\"polite\" ref={liveRef} />\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"section-wide\">\r\n        {results === 0 ? (\r\n          <div className=\"empty-hint\">\r\n            No matches. Try different keywords, or reset filters.\r\n            <div style={{ marginTop: 6 }}>\r\n              <button className=\"chip\" onClick={clearFilters}>Reset filters</button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"product-grid\">\r\n            {items.map((p) => (\r\n              <ProductCard key={p.id} product={p} />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      <section className=\"section-wide exercises\">\r\n        <div className=\"inner\">\r\n          <h2 className=\"ex-title\">Little Joy Boosts</h2>\r\n          <div className=\"exercise-grid\">\r\n            {HAPPY_EXERCISES.map((x) => (\r\n              <ExerciseTimer key={x.id} {...x} accent=\"inspired\" />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ExerciseTimer","_ref","id","emoji","title","desc","mins","accent","onComplete","total","Math","max","round","Number","left","setLeft","useState","running","setRunning","done","setDone","timerRef","useRef","endAtRef","startedOnceRef","mm","String","floor","padStart","ss","pct","useMemo","deg","min","scheduleTick","clearTimeout","current","setTimeout","_endAtRef$current","now","Date","endAt","secondsLeft","ceil","_ctx$resume","ctx","window","AudioContext","webkitAudioContext","state","resume","call","o","createOscillator","g","createGain","type","frequency","value","connect","destination","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","start","stop","_ctx$close","close","_unused","_navigator$vibrate","_navigator","navigator","vibrate","_unused2","useEffect","_jsxs","className","concat","children","_jsx","style","background","role","onClick","s","disabled","HAPPY_EXERCISES","Happy","all","Array","isArray","NAMED","defaultProducts","moodBase","filter","p","mood","source","length","q","setQ","qDeb","setQDeb","sort","setSort","chip","setChip","trim","toLowerCase","categories","counts","cnt","reduce","m","k","category","Object","keys","a","b","items","list","t","_p$tagline","_p$tags","name","includes","tagline","tags","some","x","price","_b$rating","_a$rating","rating","_b$reviews","_a$reviews","reviews","results","liveRef","clearFilters","textContent","Particles","variant","count","speed","parallax","placeholder","onChange","e","target","map","c","isAll","active","prev","opacity","marginLeft","position","width","height","padding","margin","overflow","clip","whiteSpace","border","ref","marginTop","ProductCard","product","_objectSpread"],"sourceRoot":""}